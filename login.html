<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
     <!-- Tela de Login -->
    <div id="loginScreen" class="login-container">
        <h2>Login</h2>
        <div id="loginError" class="error"></div>
        <div class="form-group">
            <input type="email" id="loginEmail" placeholder="Email" required>
        </div>
        <div class="form-group">
            <input type="password" id="loginPassword" placeholder="Senha" required>
        </div>
        <button class="btn" onclick="realizarLogin()">Entrar</button>
    </div>

    <script>
        const supabaseUrl = 'https://pgqrjtglzibalkjlkrxt.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBncXJqdGdsemliYWxramxrcnh0Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0NzY5NDY2MSwiZXhwIjoyMDYzMjcwNjYxfQ.tlYQRgXgxpQ8YrpaP-1_9vOB547K_ZH23HkEr2g92oI'; // Substitua pela sua chave real
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
       
        
        async function realizarLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');

            if (!email || !password) {
                mostrarErro('loginError', 'Email e senha são obrigatórios');
                return;
            }

            try {
                const { data, error } = await supabase.auth.signInWithPassword({
                    email: email,
                    password: password
                });

                if (error) {
                    mostrarErro('loginError', 'Erro ao fazer login: ' + error.message);
                    return;
                }

                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                errorDiv.style.display = 'none';
                
                mostrarTelaPrincipal();
                await carregarClientes();
            } catch (error) {
                console.error('Erro no login:', error);
                mostrarErro('loginError', 'Erro inesperado ao fazer login');
            }
        }
    </script>
</body>
</html>